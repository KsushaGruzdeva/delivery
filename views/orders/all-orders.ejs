<%- include('../partials/header'); -%>
<div class="d-flex justify-content-between align-items-center">
  <h4>Заказы</h4>
  <a href="/out/create_order" class="btn btn-outline-primary btn-sm">Добавить заказ</a>
</div>
<% if(orders.length === 0) { %>
<div class="alert alert-light">Список пуст</div>
<% } else { %>
<table class="table">
  <thead>
    <tr>
      <th scope="col">ID</th>
      <th scope="col">Адрес доставки</th>
      <th scope="col">Товары</th>
      <th scope="col">Создана</th>
      <th scope="col">Доставлено</th>
      <th scope="col">#</th>
    </tr>
  </thead>
  <tbody>
    <% for(const order of orders) { %>
    <tr>
      <th scope="row"><%=order.id %></th>
      <td><%=order.location %></td>
      <td>
        <% for(const item of order.cart) { %>
          <%=item.name %>
        <% } %>
      </td>
      <td><%=new Date(order.createdAt).toDateString() %></td>
      <td>
        <% if(order.deliveredAt) { %>
          <%=new Date(order.deliveredAt).toDateString() %>
        <% } %>
      </td>
      <td>
        <form action="/api/orders/delete/<%=order.id %>" method="post">
          <button type="submit" class="btn btn-outline-danger btn-sm">Удалить</button>
        </form>
      </td>
    </tr>
    <% } %>
  </tbody>
</table>
<% } %> <%- include('../partials/footer'); -%>
